import React from "react";
import { useState } from "react";
import PropTypes from "prop-types";
import { VideoContext } from "../Context/VideoContext";

export const initialState = {
  frontEnd: [
    {
      id: 1,
      title: "Equipo Front End",
      descripcion: "¬øEst√°s empezando tus estudios de Programaci√≥n? ¬øTe interesa todo lo que es la creaci√≥n de P√°ginas Web Desarrollo de Softwares? ¬øO est√°s pensando en cambiar de carrera y entrar a la maravillosa area de tecnolog√≠a?\n\nEn este video, Jeanmarie Quijada, instructora Front End en Alura Latam te explica qu√© hace el equipo de Front End.\n\n¬øQuieres saber m√°s?\n\nVe nuestros cursos de Front End:\n[Cursos de Front End](https://www.aluracursos.com/cursos-on...)\n\nEncuentra variados art√≠culos sobre tecnologia en nuestro blog: \n[Blog de Alura](https://www.aluracursos.com/blog/)\n\n¬°Videos nuevos todos los mi√©rcoles! \nA las 6pm M√©xico * 7pm Colombia * 8pm Bolivia * 9pm Argentina/Chile\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursoslatam)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)",
      url: "https://www.youtube.com/embed/rpvrLaBQwgg?si=fBJpBZWA2KWzmvXT",
    },
    {
      id: 2,
      title: "¬øQue es JavaScript?",
      descripcion: "JavaScript: ¬øqu√© es y c√≥mo se hizo este lenguaje que genera muchas discusiones y debates entre la gente del √°rea de desarrollo? Genesys y Gabriela nos hablan exactamente de esto en este Alura Tips.\n\n¬øQuieres saber m√°s?\n\nVe nuestros cursos de JavaScript:\n[Cursos de JavaScript](https://www.aluracursos.com/cursos-on...)\n\nEncuentra variados art√≠culos sobre tecnologia en nuestro blog: \n[Blog de Alura](https://www.aluracursos.com/blog/)\n\n¬°Videos nuevos todos los mi√©rcoles! \nA las 6pm M√©xico * 7pm Colombia * 8pm Bolivia * 9pm Argentina/Chile\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursoslatam)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)",
      url: "https://www.youtube.com/embed/GJfOSoaXk4s?si=jMpA3JbRxNNSbmkM",
    },
    {
      id: 3,
      title: "Cuando usar Let, Var y Const",
      descripcion: "¬øA veces cuando est√°s programando sientes dificultades en saber en qu√© momento utilizar let, var o const para declarar una variable? En este video te sacamos estas dudas, adem√°s de explicarte lo que es escopo global y local en JavaScript.\n\n¬øQuieres saber m√°s?\n\nVe nuestros cursos de Innovaci√≥n y Gesti√≥n:\n[Cursos de Innovaci√≥n y Gesti√≥n](https://www.aluracursos.com/cursos-on...)\n\nEncuentra variados art√≠culos sobre tecnologia en nuestro blog: \n[Blog de Alura](https://www.aluracursos.com/blog/)\n\n¬°Videos nuevos todos los mi√©rcoles! \nA las 6pm M√©xico * 7pm Colombia * 8pm Bolivia * 9pm Argentina/Chile\n\nInstructor: B√°rbara dos Santos\nProducci√≥n audiovisual: [Henrique Balleiras](https://www.instagram.com/henriqueballeiras)\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursos)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)",
      url: "https://www.youtube.com/embed/PztCEdIJITY?si=IZBov9JdRGKcqkLg",
    },
    {
      id: 4,
      title: "¬øPor qu√© utilizar React con Typescript? ",
      descripcion: "¬øReact con JavaScript o React con TypeScript? En este video, te mostramos las diferencias clave entre usar React con JavaScript y hacerlo con TypeScript. Exploramos las ventajas de cada enfoque, c√≥mo impactan en la productividad y la calidad del c√≥digo, y cu√°l puede ser la mejor opci√≥n para tu proyecto. ¬°Descubre cu√°l es ideal para ti!\n\nSuscr√≠bete al canal de Alura Latam para no perderte ning√∫n contenido üöÄ\n\nüß† ¬øQuieres desarrollar tus habilidades en Front End?\nDescubre los cursos de Alura que pueden ayudarte:\n[Cursos de Alura](https://www.aluracursos.com/cursos-on...)\n\n¬°Videos nuevos todos los mi√©rcoles! \nA las 6pm M√©xico * 7pm Colombia * 8pm Bolivia * 9pm Argentina/Chile\n\nüí° Conoce nuestro TechGuide:\n[TechGuide](https://techguide.sh/es)\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursoslatam)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)\n- [TikTok](https://www.tiktok.com/@aluralatam)",
      url: "https://www.youtube.com/embed/RLZ7-ZfkwOE?si=LTkrBg2chCQvLYeI",
    },
  ],
  backEnd: [
    {
      id: 5,
      title: "Spring Framework. ¬øQu√© es ?",
      descripcion: "¬øBusca un framework para utilizar en sus proyectos? ¬øConoce Spring Framework? Spring es el framework m√°s usado de Java. Nos ofrece herramientas que nos permiten crear proyectos m√°s avanzados, con mejores pr√°cticas y en menor tiempo. Tambi√©n posee una gran comunidad, lo que nos brinda much√≠sima documentaci√≥n y ayuda.\n\n¬øQuieres saber m√°s?\n\nVe nuestros cursos de Programaci√≥n:\n[Cursos de Programaci√≥n](https://www.aluracursos.com/cursos-on...)\n\nEncuentra variados art√≠culos sobre tecnologia en nuestro blog: \n[Blog de Alura](https://www.aluracursos.com/blog/)\n\n¬°Videos nuevos todos los mi√©rcoles! \nA las 6pm M√©xico * 7pm Colombia * 8pm Bolivia * 9pm Argentina/Chile\n\nEdici√≥n: [Vinicius Borges](https://www.instagram.com/vinicius.borges)\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursoslatam)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)",
      url: "https://www.youtube.com/embed/t-iqt1b2qqk?si=ey2CZSbGChCd0m7W",
    },
    {
      id: 6,
      title: "¬øQu√© es SQL y NoSQL?",
      descripcion: "¬øCu√°les son las diferencias entre una estructura de datos relacional (SQL) y una no relacional (NoSQL) y cu√°les son las principales ventajas de cada una? √Ålvaro Camacho lo explica en este v√≠deo.\n\nContenido del video:\n- 00:00 Introducci√≥n\n- 00:28 Base de datos\n- 01:50 Diferencia entre SQL y NoSQL\n- 07:10 Bases de datos m√°s conocidas\n- 10:10 Cu√°ndo utilizar cada base de datos\n\n¬øQuieres profundizar m√°s?\n\nVe nuestros cursos de Bases de Datos:\n[Cursos de Bases de Datos](https://www.aluracursos.com/cursos-on...)\n\nEncuentra variados art√≠culos sobre tecnologia en nuestro blog: \n[Blog de Alura](https://www.aluracursos.com/blog/)\n\n¬°Videos nuevos todos los mi√©rcoles! \nA las 6pm M√©xico * 7pm Colombia * 8pm Bolivia * 9pm Argentina/Chile\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursoslatam)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)",
      url: "https://www.youtube.com/embed/cLLKVd5CNLc?si=gkDEcMEXw7QYfZfo",
    },
    {
      id: 7,
      title: "Simplificando tu c√≥digo en Java: Conoce los enum",
      descripcion: "¬øEscribir muchas variables del tipo constantes en Java te parece un proceso tedioso y que genera muchas l√≠neas de c√≥digo? \n\nEn este Alura+ la instructora G√©nesys Rond√≥n nos ense√±a a simplificar esta tarea usando un tipo de dato especial llamado enum.\n\n¬øTe gustar√≠a aprender Java desde 0 en nuestra plataforma?\n[Formaci√≥n de Java](https://www.aluracursos.com/formacion...)\n\nConoce m√°s detalles sobre los tipos de datos enum visitando la documentaci√≥n oficial:\n[Documentaci√≥n de enum en Java](https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)\n\nInstructora: G√©nesys Rond√≥n\n\nProducci√≥n audiovisual: [Henrique Balleiras](https://www.instagram.com/henriqueballeiras)\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursos)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)",
      url: "https://www.youtube.com/embed/EoPvlE85XAQ?si=9GPArZ1oJn7fgzYU",
    },
    {
      id: 8,
      title: "Explorando el poder del Back-End en el Desarrollo Web",
      descripcion: "¬øQuieres saber m√°s?\n\nVe nuestros cursos:\n[Cursos de Alura](https://www.aluracursos.com/cursos-on...)\n\nEncuentra variados art√≠culos sobre tecnologia en nuestro blog: \n[Blog de Alura](https://www.aluracursos.com/blog/)\n\n¬°Videos nuevos todos los mi√©rcoles! \nA las 6pm M√©xico * 7pm Colombia * 8pm Bolivia * 9pm Argentina/Chile\n\nProductor Audiovisual: [Henrique Balleiras](https://www.instagram.com/henriqueballeiras)\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursoslatam)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)\n\nContenido del video:\n- 00:00 Introducci√≥n\n- 00:30 Qu√© es Back End\n- 02:30 Por qu√© empezar su carrera con Back End\n- 04:50 Existe Back End sin Front End?\n- 06:50 Con cu√°l lenguaje empezar en Back End\n- 09:00 Habilidades de un desarrollador Back End",
      url: "https://www.youtube.com/embed/Z024LSCMqFk?si=E7en_tcb5lqZbscD",
    },
  ],
  innovacionGestion: [
    {
      id: 9,
      title: "¬øQu√© son las Soft Skills?",
      descripcion: "¬øQu√© son las Softskills y por qu√© es tan importante desarrollarlas para posicionarse en el mercado laboral? En este video de Alura Tips, Pri Stuani nos habla de las habilidades m√°s buscadas por las empresas en sus profesionales y c√≥mo las Soft Skills te ayudan en el d√≠a a d√≠a.\n\n¬øQuieres saber m√°s?\n\nVe nuestros cursos de Innovaci√≥n y Gesti√≥n:\n[Cursos de Innovaci√≥n y Gesti√≥n](https://app.aluracursos.com/category/...)\n\nEncuentra variados art√≠culos sobre tecnologia en nuestro blog: \n[Blog de Alura](https://www.aluracursos.com/blog/)\n\n¬°Videos nuevos todos los mi√©rcoles! \nA las 6pm M√©xico * 7pm Colombia * 8pm Bolivia * 9pm Argentina/Chile\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursoslatam)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)",
      url: "https://www.youtube.com/embed/vhwspfvI52k?si=bITtheflF9jdZsHX",
    },
    {
      id: 10,
      title: "Las 7 Soft Skills m√°s deseadas por las empresas",
      descripcion:"Seguro que ya escuchaste hablar sobre las Soft Skills, pero ¬øsabes cu√°les son las 7 m√°s buscadas por las empresas? Qu√©date en este video con nosotros que vamos a explicarte la importancia de estas habilidades y porque son tan requeridas en el mercado laboral.\n\n¬øQuieres saber m√°s?\n\nVe nuestros cursos de Innovaci√≥n y Gesti√≥n:\n[Cursos de Innovaci√≥n y Gesti√≥n](https://www.aluracursos.com/cursos-on...)\n\nEncuentra variados art√≠culos sobre tecnologia en nuestro blog: \n[Blog de Alura](https://www.aluracursos.com/blog/)\n\n¬°Videos nuevos todos los mi√©rcoles! \nA las 6pm M√©xico * 7pm Colombia * 8pm Bolivia * 9pm Argentina/Chile\n\nEdici√≥n: [Pamela Lima](https://www.instagram.com/pamelalimafotografia)\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursoslatam)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)",
      url: "https://www.youtube.com/embed/YhR7Zp8NUzE?si=cmvuxErTFcE3nWpI",
    },
    {
      id: 11,
      title: "¬øQu√© son las metodologias √°giles?",
      descripcion:"En este video nuestra invitada, Andyara, nos explicar√° que s√≥n las muy conocidas hoy en d√≠a metodologias √°giles y nos comentar√° un poco sobre como aplicarlas y cu√°les son los beneficios de utilizarlas en su equipo o empresa.\n\n¬øQuieres saber m√°s?\n\nVe nuestros cursos de Innovaci√≥n y Gesti√≥n:\n[Cursos de Innovaci√≥n y Gesti√≥n](https://www.aluracursos.com/cursos-on...)\n\nEncuentra variados art√≠culos sobre tecnologia en nuestro blog: \n[Blog de Alura](https://www.aluracursos.com/blog/)\n\n¬°Videos nuevos todos los mi√©rcoles! \nA las 6pm M√©xico * 7pm Colombia * 8pm Bolivia * 9pm Argentina/Chile\n\nEdici√≥n: [Pamela Lima](https://www.instagram.com/pamelalimafotografia)\n\nProducci√≥n e Direcci√≥n:\n[Henrique Balleiras](https://www.instagram.com/henriqueballeiras)\n\nCaptura de audio:\n- [Daya Costa](https://www.instagram.com/daayard)\n- [Kaue Felipe](https://www.instagram.com/kauefsr01)\n\nAsistente de C√°mara:\nLua Apolin√°rio\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursoslatam)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)",
      url: "https://www.youtube.com/embed/6N3OkLCfK-0?si=G-TQFF1eXjndGk8m",
    },
    {
      id: 12,
      title: "Desaf√≠os y soluciones del trabajo remoto #AluraTips",
      descripcion: "En el video de hoy vamos a ver cu√°les son los desaf√≠os y las soluciones que las empresas y los colaboradores enfrentan con el trabajo remoto.\n\n¬øQuieres saber m√°s?\n\nVe nuestros cursos de Innovaci√≥n y Gesti√≥n:\n[Cursos de Innovaci√≥n y Gesti√≥n](https://www.aluracursos.com/cursos-on...)\n\nEncuentra variados art√≠culos sobre tecnologia en nuestro blog: \n[Blog de Alura](https://www.aluracursos.com/blog/)\n\n¬°Videos nuevos todos los mi√©rcoles! \nA las 6pm M√©xico * 7pm Colombia * 8pm Bolivia * 9pm Argentina/Chile\n\nüí° Conoce nuestro TechGuide:\n[TechGuide](https://techguide.sh/es)\n\nS√≠guenos en:\n- [Instagram](https://www.instagram.com/aluralatam)\n- [Facebook](https://www.facebook.com/aluracursoslatam)\n- [Linkedin](https://www.linkedin.com/company/alura-latam)\n- [TikTok](https://www.tiktok.com/@aluralatam)\n\nüëâ ¬°Visita nuestro sitio web y descubre el universo de oportunidades que te esperan en Alura Latam! üí°\n[Alura Latam](https://www.aluracursos.com/)",
      url: "https://www.youtube.com/embed/kIvnVfnmDyE",
    },
  ],
  uxUiDise√±o: [],
  devOps: [],
  mobileDevelopment: [],
  dataScience: [],
  otros: []
};

function VideoProvider({ children }) {
  const [videos, setVideos] = useState(initialState);
  const [alert, setAlert] = useState({ type: null, message: null });

  const transformYoutubeUrl = (url) => {
    try {
      if (!url) return '';
      
      if (url.includes('/embed/')) {
        return url;
      }

      const match = url.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/watch\?.+&v=))([^"&?\/\s]{11})/);
      if (match) {
        return `https://www.youtube.com/embed/${match[1]}`;
      }

      return url;
    } catch (error) {
      console.error("Error transformando URL:", error);
      return url;
    }
  };

  const addVideo = (newVideo) => {

    if (!newVideo.category) {
      console.error("El video debe tener una categor√≠a");
      return;
    }

    const videoToAdd = {
      ...newVideo,
      url: transformYoutubeUrl(newVideo.url),
      id: new Date().getTime()
    };

    setVideos(prevVideos => {
      const updatedVideos = {
        ...prevVideos,
        [newVideo.category]: [...(prevVideos[newVideo.category] || []), videoToAdd]
      };
      return updatedVideos;
    });

 
    setAlert({
      type: 'success',
      message: 'Video agregado con √©xito',
      position: { vertical: 'bottom', horizontal: 'left' }
    });
  };

  const deleteVideo = (videoId) => {
    setVideos(prevVideos => {
      const updatedVideos = {};
      
      Object.keys(prevVideos).forEach(category => {
        updatedVideos[category] = prevVideos[category].filter(video => video.id !== videoId);
      });

      return updatedVideos;
    });

    setAlert({
      type: 'success',
      message: 'El video se borr√≥ de la galer√≠a con √©xito',
      position: { vertical: 'bottom', horizontal: 'left' }
    });

    setTimeout(() => {
      setAlert({ type: null, message: null, position: null });
    }, 3000);
  };

  const updateVideo = (videoId, updatedVideo) => {
    
    setVideos(prevVideos => {
      const updatedVideos = { ...prevVideos };

      Object.keys(updatedVideos).forEach(category => {
        const videoIndex = updatedVideos[category].findIndex(video => video.id === videoId);
        
        if (videoIndex !== -1) {
          const originalCategory = category;
          const newCategoryKey = updatedVideo.category;
          
          if (newCategoryKey !== originalCategory) {
            const videoToMove = updatedVideos[originalCategory][videoIndex];
            updatedVideos[originalCategory] = updatedVideos[originalCategory].filter(video => video.id !== videoId);

            if (!updatedVideos[newCategoryKey]) {
              updatedVideos[newCategoryKey] = [];
            }
            updatedVideos[newCategoryKey].push({
              ...videoToMove,
              ...updatedVideo,
              id: videoId 
            });
          } else {
            updatedVideos[category][videoIndex] = {
              ...updatedVideos[category][videoIndex],
              ...updatedVideo,
              id: videoId 
            };
          }
        }
      });

      return updatedVideos;
    });

    setAlert({
      type: 'success',
      message: 'El video se actualiz√≥ con √©xito',
      position: { vertical: 'bottom', horizontal: 'left' }
    });

    setTimeout(() => {
      setAlert({ type: null, message: null, position: null });
    }, 3000);
  };

  const value = {
    videos,
    addVideo,
    deleteVideo,
    updateVideo,
    alert,
    setAlert
  };

  return (
    <VideoContext.Provider value={value}>
      {children}
    </VideoContext.Provider>
  );
}

VideoProvider.propTypes = {
  children: PropTypes.node.isRequired,
};

export { VideoProvider };
export default VideoProvider;
